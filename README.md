# Ассемблер и интерпретатор для Учебной Виртуальной Машины (УВМ)

Проект реализует полный цикл разработки для учебной виртуальной машины (УВМ):
- ассемблер (трансляция из текста в машинный код),
- интерпретатор (выполнение программы),
- тестирование всех компонентов.

Спецификация УВМ включает 4 команды:
- `LOAD_CONST` — загрузка константы на стек,
- `READ_MEM` — чтение из памяти данных,
- `WRITE_MEM` — запись в память данных,
- `SGN` — унарная операция знака числа.

---

## Структура проекта
├── assembler.py # Ассемблер (Этапы 1–2)
├── interpreter.py # Интерпретатор (Этапы 3–5)
├── run.py # Скрипт быстрого запуска
├── test_stage2.py # Тесты для Этапа 2
├── HOWTO.txt # Пошаговая инструкция по запуску
├── README.md # Данная документация
│
├── example_programs/ # Примеры программ
│ ├── simple.asm
│ ├── formats.asm
│ └── spec_tests.asm
│
├── .asm # Тестовые программы (copy_array.asm, sgn_.asm и др.)
└── *.bin, *.json # Скомпилированные программы и дампы памяти


---

## Формат исходного кода

Поддерживаются два формата:

### 1. Простой текстовый формат (`.asm`, `.txt`)

Каждая строка — одна команда. Комментарии начинаются с `#`.

**Синтаксис:**
```asm
load <константа>   # Загрузить константу (десятичное, hex: 0x..., bin: 0b...)
read <смещение>    # Прочитать из памяти: адрес = стек[-1] + смещение (0–63)
write <адрес>      # Записать стек[-1] в память[адрес]
sgn                # Вычислить знак(память[стек.pop()])
```


### 2. YAML-формат (.yaml, .yml)
Использует структуру program: [список инструкций].
Каждая инструкция — словарь с ключами op и (опционально) operand.

```commandline
program:
  - op: load
    operand: 468
  - op: read
    operand: 15
  - op: write
    operand: 224
  - op: sgn
```

### Формат дампа памяти (JSON)
```commandline
{
  "memory_dump": {
    "start": 100,
    "end": 106,
    "size": 6,
    "data": {
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0
    }
  }
}
```
